# data = {"listings" =>
# [{"listing"=>
# {"bathroom_label"=>"2 shared baths",
#  "bathrooms"=>2,
#  "bed_label"=>"1 bed",
#  "bedroom_label"=>"Studio",
#  "bedrooms"=>0,
#  "beds"=>1,
#  "city"=>"New York",
#  "guest_label"=>"1 guest",
#  "host_languages"=>["en", "ru"],
#  "host_thumbnail_url_small"=>
#   "https://a0.muscache.com/im/pictures/user/4b4cec69-f1e2-4555-9cc2-4bce504049bc.jpg?aki_policy=profile_small",
#  "host_thumbnail_url"=>
#   "https://a0.muscache.com/im/pictures/user/4b4cec69-f1e2-4555-9cc2-4bce504049bc.jpg?aki_policy=profile_x_medium",
#  "id"=>35646737,
#  "is_business_travel_ready"=>false,
#  "is_new_listing"=>false,
#  "is_superhost"=>false,
#  "lat"=>40.74946,
#  "lng"=>-73.99627,
#  "localized_city"=>"New York",
#  "localized_neighborhood"=>"Manhattan",
#  "name"=>"Private Cabins @ Chelsea, Manhattan",
#  "neighborhood"=>"Manhattan",
#  "person_capacity"=>1,
#  "picture_count"=>5,
#  "picture_url"=>"https://a0.muscache.com/im/pictures/71cdc685-a9c3-4345-8e7a-21de76f272a5.jpg?aki_policy=large",
#  "picture_urls"=>
#   ["https://a0.muscache.com/im/pictures/71cdc685-a9c3-4345-8e7a-21de76f272a5.jpg?aki_policy=large",
#    "https://a0.muscache.com/im/pictures/79ac9f45-c5b5-4257-b662-e70d28fed6e6.jpg?aki_policy=large",
#    "https://a0.muscache.com/im/pictures/f261b0df-84a1-4aca-8502-58d95bd95fc7.jpg?aki_policy=large",
#    "https://a0.muscache.com/im/pictures/17f20c34-12f2-4021-90b3-0e87fa02ff51.jpg?aki_policy=large",
#    "https://a0.muscache.com/im/pictures/ce0501a9-d546-4afe-963e-062ee5579c27.jpg?aki_policy=large"],
#  "picture"=>
#   {"id"=>779716207,
#    "dominant_saturated_color"=>"#D94201",
#    "large_ro"=>"https://a0.muscache.com/im/pictures/71cdc685-a9c3-4345-8e7a-21de76f272a5.jpg?aki_policy=large_ro",
#    "picture"=>"https://a0.muscache.com/im/pictures/71cdc685-a9c3-4345-8e7a-21de76f272a5.jpg?aki_policy=large",
#    "preview_encoded_png"=>
#     "iVBORw0KGgoAAAANSUhEUgAAAAUAAAADCAIAAADUVFKvAAAAO0lEQVQIHQEwAM//AbyhivX09R4cGere1vHi2QGtmokUB/0LFh8DzsbLuLIBZUAmO0dMNEJN7sa78djSadkYwBcmlsIAAAAASUVORK5CYII=",
#    "saturated_a11y_dark_color"=>"#D94201",
#    "scrim_color"=>"#5C3C27"},
#  "preview_amenities"=>"Wifi,Air conditioning",
#  "preview_encoded_png"=>
#   "iVBORw0KGgoAAAANSUhEUgAAAAUAAAADCAIAAADUVFKvAAAAO0lEQVQIHQEwAM//AbyhivX09R4cGere1vHi2QGtmokUB/0LFh8DzsbLuLIBZUAmO0dMNEJN7sa78djSadkYwBcmlsIAAAAASUVORK5CYII=",
#  "property_type_id"=>45,
#  "reviews_count"=>12,
#  "room_and_property_type"=>"Private room in hostel",
#  "room_type_category"=>"private_room",
#  "room_type"=>"Private room",
#  "scrim_color"=>"#5C3C27",
#  "show_structured_name"=>false,
#  "space_type"=>"Hostel room",
#  "star_rating"=>4.5,
#  "tier_id"=>0,
#  "user"=>
#   {"first_name"=>" ",
#    "has_profile_pic"=>true,
#    "id"=>117365574,
#    "is_superhost"=>false,
#    "picture_url"=>
#     "https://a0.muscache.com/im/pictures/user/4b4cec69-f1e2-4555-9cc2-4bce504049bc.jpg?aki_policy=profile_x_medium",
#    "smart_name"=>" ",
#    "thumbnail_url"=>
#     "https://a0.muscache.com/im/pictures/user/4b4cec69-f1e2-4555-9cc2-4bce504049bc.jpg?aki_policy=profile_small"},
#  "public_address"=>"New York, NY, United States",
#  "amenity_ids"=>[35, 4, 36, 37, 5, 39, 40, 41, 42, 45, 46, 47, 16, 30],
#  "preview_amenity_names"=>["Wifi", "Air conditioning"],
#  "reviews"=>[],
#  "preview_tags"=>[],
#  "avg_rating"=>4.33,
#  "map_highlight_status"=>"NO_HIGHLIGHT",
#  "min_nights"=>1,
#  "max_nights"=>29,
#  "contextual_pictures"=>
#   [{"id"=>1913845423,
#     "picture"=>"https://a0.muscache.com/im/pictures/71cdc685-a9c3-4345-8e7a-21de76f272a5.jpg?aki_policy=large",
#     "caption"=>{"messages"=>["New York"]}},
#    {"id"=>338779679,
#     "picture"=>"https://a0.muscache.com/im/pictures/79ac9f45-c5b5-4257-b662-e70d28fed6e6.jpg?aki_policy=large",
#     "caption"=>{"messages"=>["Studio", "2 shared baths"]}},
#    {"id"=>530093528,
#     "picture"=>"https://a0.muscache.com/im/pictures/f261b0df-84a1-4aca-8502-58d95bd95fc7.jpg?aki_policy=large",
#     "caption"=>{"messages"=>["1 single bed"]}},
#    {"id"=>1236108426,
#     "picture"=>"https://a0.muscache.com/im/pictures/17f20c34-12f2-4021-90b3-0e87fa02ff51.jpg?aki_policy=large",
#     "caption"=>{"messages"=>["Wifi", "Air conditioning"]}},
#    {"id"=>438373286,
#     "picture"=>"https://a0.muscache.com/im/pictures/ce0501a9-d546-4afe-963e-062ee5579c27.jpg?aki_policy=large",
#     "caption"=>{"messages"=>["Rated 4.4 out of 5 for cleanliness"]}}],
#  "pdp_type"=>"MARKETPLACE",
#  "pdp_url_type"=>"ROOMS",
#  "extend_cards"=>[],
#  "picture_ids"=>[779716207, 779716211, 779716212, 779716213, 779716215],
#  "cancel_policy"=>"CANCEL_MODERATE",
#  "pdp_display_extensions"=>[],
#  "coordinate"=>{"latitude"=>40.74946, "longitude"=>-73.99627}},
# "pricing_quote"=>
# {"can_instant_book"=>true,
#  "monthly_price_factor"=>0.85,
#  "price_string"=>"$82",
#  "rate"=>{"amount"=>82, "amount_formatted"=>"$82", "currency"=>"USD", "is_micros_accuracy"=>false},
#  "rate_type"=>"nightly",
#  "rate_with_service_fee"=>{"amount"=>82, "amount_formatted"=>"$82", "currency"=>"USD", "is_micros_accuracy"=>false},
#  "weekly_price_factor"=>1,
#  "should_show_from_label"=>false,
#  "china_promotion_display_types"=>[]},
# "verified_card"=>false}]}











response = Unirest.get "https://airbnb-com.p.rapidapi.com/listings/nearby/40.750134/-73.997009",
  headers:{
    "X-RapidAPI-Host" => "airbnb-com.p.rapidapi.com",
    "X-RapidAPI-Key" => ENV['airbnb_key']
  }
  data = response.body
  names = data["listings"].map do |listing|
  listing["listing"]["name"]
  end

binding.pry

  
  #   url = URI("https://airbnb-com.p.rapidapi.com/listings/nearby/40.750134/-73.997009")

  # http = Net::HTTP.new(url.host, url.port)
  # http.use_ssl = true
  # http.verify_mode = OpenSSL::SSL::VERIFY_NONE

  # request = Net::HTTP::Get.new(url)
  # request["x-rapidapi-host"] = 'airbnb-com.p.rapidapi.com'
  # request["x-rapidapi-key"] = ENV['airbnb_key']

  # #response = http.request(request)
  # data = JSON.parse(http.request(request).body)
